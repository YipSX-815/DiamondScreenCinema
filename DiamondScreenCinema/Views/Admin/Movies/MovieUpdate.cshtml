@model MovieVM
@{
    Layout = "_AdminLayout";
}

@section head {
    <link rel="stylesheet" href="~/css/Admin View/Movies/MovieCreate.css" asp-append-version="true" />
}

<div class="form-container">
    <h2 class="form-title">Movie Information - Update Movie Information</h2>

    <form asp-action="MovieUpdate" asp-controller="Admin" method="post" enctype="multipart/form-data">
        <input type="hidden" asp-for="MovieId" />
        <input type="hidden" asp-for="Poster" />
        <input type="hidden" asp-for="Trailer" />
        <input type="hidden" asp-for="HorizontalPoster" />

        <div class="form-layout">
            <div class="poster-section">
                <label>Poster <span style="color: red;">*</span></label>

                <label class="file-upload-label poster-upload" for="PosterFile">
                    <img id="posterPreview" class="preview-image"
                         src="@(string.IsNullOrEmpty(Model.Poster) ? "" : Model.Poster)"
                         style="@(string.IsNullOrEmpty(Model.Poster) ? "display:none;" : "display:block;")" />
                    <span id="uploadText" class="upload-text"
                          style="@(string.IsNullOrEmpty(Model.Poster) ? "" : "display:none;")">
                        Click to Upload Poster<br>(Recommended: 300×450)
                    </span>
                </label>

                <input asp-for="PosterFile" type="file" accept="image/*" hidden id="PosterFile" />

                <button type="button" id="removePoster" class="remove-btn"
                        style="@(string.IsNullOrEmpty(Model.Poster) ? "display:none;" : "")">
                    Remove Poster
                </button>
            </div>

            <div class="form-fields">
                <div class="form-group">
                    <label>Title <span style="color: red;">*</span></label>
                    <input asp-for="Title" required />
                </div>

                <div class="form-group">
                    <label>Genre <span style="color: red;">*</span></label>
                    <select asp-for="Genre" required>
                        <option value="">Select Genre</option>
                        <option>Action</option>
                        <option>Adventure</option>
                        <option>Animation</option>
                        <option>Comedy</option>
                        <option>Crime</option>
                        <option>Drama</option>
                        <option>Documentary</option>
                        <option>Fantasy</option>
                        <option>Historical</option>
                        <option>Horror</option>
                        <option>Mystery</option>
                        <option>Romance</option>
                        <option>Science Fiction</option>
                        <option>Sports</option>
                        <option>Thriller</option>
                        <option>War</option>
                        <option>Western</option>
                        <option>Family</option>
                        <option>Musical</option>
                        <option>Biography</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Duration (minutes) <span style="color: red;">*</span></label>
                    <input asp-for="Duration" type="number" min="1" required />
                </div>

                <div class="form-group">
                    <label>Language <span style="color: red;">*</span></label>
                    <input asp-for="Language" list="languages" placeholder="Select or type" required />
                    <datalist id="languages">
                        <option value="English" />
                        <option value="Mandarin" />
                        <option value="Malay" />
                        <option value="Tamil" />
                        <option value="Korean" />
                        <option value="Japanese" />
                        <option value="Thai" />
                        <option value="Hindi" />
                        <option value="Spanish" />
                        <option value="French" />
                        <option value="German" />
                    </datalist>
                </div>

                <div class="form-group">
                    <label>Director <span style="color: red;">*</span></label>
                    <input asp-for="Director" required />
                </div>

                <div class="form-group">
                    <label>Cast <span style="color: red;">*</span></label>
                    <input asp-for="Cast" required />
                </div>

                <div class="form-group">
                    <label>Classification <span style="color: red;">*</span></label>
                    <select asp-for="Classification" required>
                        <option value="">Select Classification</option>
                        <option value="U">U — General</option>
                        <option value="PG">PG — Parental Guidance</option>
                        <option value="PG-13">PG-13 — Parental Caution</option>
                        <option value="16+">16+ — Teens & Adults</option>
                        <option value="18+">18+ — Adults Only</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Subtitle <span style="color: red;">*</span></label>
                    <select asp-for="Subtitle" required>
                        <option value="">Select</option>
                        <option>None</option>
                        <option>English</option>
                        <option>Multiple</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Release Date <span style="color: red;">*</span></label>
                    <input asp-for="ReleaseDate" type="date" required />
                </div>

                <div class="form-group">
                    <label>Status <span style="color: red;">*</span></label>
                    <select asp-for="Status" required>
                        <option value="">Select Status</option>
                        <option>Upcoming</option>
                        <option>Showing</option>
                        <option>Cancelled</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-group full-width">
            <label>Synopsis <span style="color: red;">*</span></label>
            <textarea asp-for="Synopsis"></textarea>
        </div>

        <div class="poster-section">
            <label class="horizontalPoster-Label">Horizontal Poster <span style="color: red;">*</span></label>

            <label class="file-upload-label horizontal-upload" for="HorizontalPosterFile">
                <img id="horizontalPosterPreview" class="preview-horizontal"
                     src="@(string.IsNullOrEmpty(Model.HorizontalPoster) ? "" : Model.HorizontalPoster)"
                     style="@(string.IsNullOrEmpty(Model.HorizontalPoster) ? "display:none;" : "display:block;")" />

                <span id="horizontalUploadText" class="upload-text"
                      style="@(string.IsNullOrEmpty(Model.HorizontalPoster) ? "" : "display:none;")">
                    Click to Upload Horizontal Poster<br>(Recommended: 1280×720)<br><br>
                </span>
            </label>

            <input asp-for="HorizontalPosterFile" type="file" accept="image/*" hidden id="HorizontalPosterFile" />

            <button type="button" id="removeHorizontalPoster" class="remove-btn"
                    style="@(string.IsNullOrEmpty(Model.HorizontalPoster) ? "display:none;" : "")">
                Remove Horizontal Poster
            </button>
        </div>

        <div class="trailer-section">
            <label>Trailer <span style="color: red;">*</span></label>

            <label class="file-upload-label trailer-upload" for="TrailerFile">
                <video id="trailerPreview" class="preview-video" controls
                       style="@(string.IsNullOrEmpty(Model.Trailer) ? "display:none;" : "display:block;")"
                       src="@Model.Trailer"></video>

                <span id="trailerUploadText" class="upload-text"
                      style="@(string.IsNullOrEmpty(Model.Trailer) ? "" : "display:none;")">
                    Click to Upload Trailer Video<br>(Recommended: MP4)
                </span>
            </label>

            <input asp-for="TrailerFile" id="TrailerFile" type="file" accept="video/*" hidden />

            <button type="button" id="removeTrailer" class="remove-btn"
                    style="@(string.IsNullOrEmpty(Model.Trailer) ? "display:none;" : "")">
                Remove Trailer
            </button>
        </div>

        <div class="form-actions">
            <a asp-controller="Admin" asp-action="Movies" asp-route-Page="MovieManagement" class="btn btn-cancel">Cancel</a>
            <button type="submit" class="createBtn">Update</button>
        </div>
    </form>
</div>

@section Script {
    <script src="~/js/Admin View/Movies/MovieCreate.js"></script>
    <script>
        @if (TempData["NotificationMessage"] != null)
        {
                <text>
                showNotification('@TempData["NotificationMessage"]', '@TempData["NotificationType"]');
                </text>
        }
    </script>
}
